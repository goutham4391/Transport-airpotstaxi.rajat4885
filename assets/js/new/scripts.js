var count_flag=false;var loaderStart=function(){if(!count_flag){jQuery(document.body).one().append("<div class='loader__container'><div class='loader--inner'><i class='fa fa-circle-o-notch fa-spin fa-3x fa-fw'></i><span class='loader__text'>Please Wait...</span></div></div>");jQuery('loader__container').off().show();}
count_flag=true;};var loaderEnd=function(){if(jQuery('.loader__container').length>0){jQuery('.loader__container').remove();}
count_flag=false;};(function($,window){'use strict';var $J=jQuery.noConflict();var isBootstrapEvent=false;if(window.jQuery){var all=jQuery('*');jQuery.each(['hide.bs.dropdown','hide.bs.collapse','hide.bs.modal','hide.bs.tooltip','hide.bs.popover','hide.bs.tab'],function(index,eventName){all.on(eventName,function(event){isBootstrapEvent=true;});});}
$J("#book_update_button").click(function(){$J("#update_reservation_form").validate({rules:{destination_address:{required:true},flight_number:{required:true},dof_hotel_name:{required:true},client_mobile:{required:true},pick_up_hotel_name:{required:true},dep_flight_number:{required:true},train_number:{required:true},cruise_name:{required:true}},messages:{destination_address:{required:"Please provide the full address including door number and postal code"},flight_number:{required:"Please provide the flight number, including the airline code. For example: BA548"},dof_hotel_name:{required:"Please provide hotel name"},client_mobile:{required:"Please provide your mobile phone number, including international dialling code."},pick_up_hotel_name:{required:"Please provide hotel name"},dep_flight_number:{required:"Please provide the flight number, including the airline code. For example: BA548"},train_number:{required:"Please provide the train number, including the name of the train operator."},cruise_name:{required:"Please provide the cruise line and cruise ship name."}},submitHandler:function(){loaderStart();updateAskInfo();}});});var client_mobile_number=new RegExp("^(\\+)?(\\d+)$");$J('#client_mobile').on('keyup',function(){if($J(this).val().length==1)$J(this).val('+');else{var res=chkInput();if(!res)$J(this).val($J(this).val().slice(0,-1));}});function chkInput(){var mobile_number=$J('#client_mobile').val().charAt($J('#client_mobile').val().length-1);return client_mobile_number.test(mobile_number);}
var originalHide=Element.hide;Element.addMethods({hide:function(element){if(isBootstrapEvent){isBootstrapEvent=false;return element;}
return originalHide(element);}});$('.has-toggle').each(function(){var $toggleEl=$(this);$(".toggles",$toggleEl).on('click',function(e){e.preventDefault();var $elel=$(".toggled",$toggleEl);$elel.toggle();$(".toggled").not($elel).hide();return false;});$('#covid19-lnk',$toggleEl).on('click',function(e){e.preventDefault();$('#covid19-lnk',$toggleEl).addClass('active');$('#covid19-lnk',$toggleEl).css('background-color','#f8f8f8');$('#transferinfo-lnk',$toggleEl).removeClass('active');$('#transferinfo-lnk',$toggleEl).css('background-color','#ffffff');$('#transfer-info',$toggleEl).hide();$('#covid19-tab',$toggleEl).show();});$('#transferinfo-lnk',$toggleEl).on('click',function(e){e.preventDefault();$('#covid19-lnk',$toggleEl).removeClass('active');$('#covid19-lnk',$toggleEl).css('background-color','#ffffff');$('#transferinfo-lnk',$toggleEl).addClass('active');$('#transferinfo-lnk',$toggleEl).css('background-color','#f8f8f8');$('#covid19-tab',$toggleEl).hide();$('#transfer-info',$toggleEl).show();});$(".close-car-overlay",$toggleEl).on('click',function(e){e.preventDefault();$('#covid19-tab, #transfer-info',$toggleEl).hide();$('#covid19-lnk, #transferinfo-lnk',$toggleEl).css('background-color','#ffffff');$('#covid19-lnk, #transferinfo-lnk',$toggleEl).removeClass('active');});});$('html').on('click',function(){$(".toggled").hide();});if($('#mainmenu > *').length<1){$('.navbar-toggle').hide();}
$(document).on('scroll',function(){var $nav=$(".topnav");$nav.toggleClass('scrolled',$(this).scrollTop()>$nav.height());});var resizeId;$(window).on('resize',function(){clearTimeout(resizeId);resizeId=setTimeout(doneResizing,200);});function doneResizing(){if($('#booking_details')){iFrameResize($('#booking_details'));}}
function iFrameResize(myFrame){var lastHeight=0,myPassedFrame=$(myFrame);var curHeight=myPassedFrame.contents().find('body').height();if(curHeight!==lastHeight){myPassedFrame.css('height',(lastHeight=curHeight)+220+'px');}}
$("#booking_details").on('load',function(){var resizedIframe;$(this).contents().on("click, mousemove",function(){clearTimeout(resizedIframe);resizedIframe=setTimeout(doneResizing,300);});});var windowSize=$(window).width();if(windowSize<=768){$.autotab({tabOnSelect:true});$('.ui-autocomplete-input').on('focus',function(){var top=$(this).offset().top-50;$(window).scrollTop(top);});}
$('#booking_list').on('click',function(){$('html, body').animate({scrollTop:$('#booking_details').offset().top},600);});$.extend($.expr.pseudos,{focusable:function(el,index,selector){return $(el).is('input, select, [tabindex]');}});$(document).on('keypress','input, select',function(e){if(e.which==13){var $canfocus=$(':focusable');var index=$canfocus.index(this)+1;if(index>=$canfocus.length)index=0;$canfocus.eq(index).focus();}});$('#tabs a').on('click',function(e){e.preventDefault();$(this).tab('show');});$('.dropdown-toggle').dropdown();$(".open-overlay").on('click',function(e){e.preventDefault();$(".overlay-wrapper").show();});$(".close-overlay").on('click',function(e){e.preventDefault();$(".overlay-wrapper").hide();$(".car-more--text").hide();});$(".open-overlay-privacy").on('click',function(e){e.preventDefault();$(".overlay-wrapper-privacy").show();});$(".close-overlay-privacy").on('click',function(e){e.preventDefault();$(".overlay-wrapper-privacy").hide();});$('.to-top').on('click',function(){$('html, body').animate({scrollTop:$('#mybooking').offset().top},800);});$('#list_currency').on('change',function(){var value=$(this).val();$.post("/ajax/setCurrency",{currency:value},function(data,status){changeCurrency();});});function updateAskInfo(){jQuery('#book_update_button').hide();let url='/ajax/updateAskInfo';jQuery.post(url,$('#update_reservation_form').serialize(),function(){loaderEnd();location.reload();})}
jQuery('body').on('click',"#submit_vehicle_form",function(e){e.preventDefault();let capacity=$J(this).closest(".vehicle_form").find("#vhcl_capacity").val();let passengers=$J(this).closest(".vehicle_form").find("#pax1").val();if(parseInt(passengers)>parseInt(capacity)){Swal.fire({html:'This vehicle is not suitable for the number of passengers selected. </br></br> You can book multiple cars up to the required capacity, but you will need to reduce the number of passengers to book this service.',icon:'warning',confirmButtonColor:'#7cd1f9',})}else{$J(this).closest(".vehicle_form").attr('action','taxibookings/details/')
$J(this).closest(".vehicle_form").submit()}});let $items=$J('.vehicle_select');$items.each((i,el)=>$(el).data('index',i));$J('#filter_by_price').on('change',function(){var sortingMethod=$(this).val();if(sortingMethod=='1'){sortProductsRecomended();}else if(sortingMethod=='2'){sortProductsPriceAscending();}else if(sortingMethod=='3'){sortProductsPriceDescending();}})
function sortProductsRecomended(){$items.sort((a,b)=>$J(a).data('index')>$J(b).data('index')?1:-1).appendTo('.selection-box');}
function sortProductsPriceAscending(){var gridItems=$J('.vehicle_select');gridItems.sort(function(a,b){return $J('.total-price',a).data("price")-$J('.total-price',b).data("price");});$J(".selection-box").append(gridItems);}
function sortProductsPriceDescending(){var gridItems=$J('.vehicle_select');gridItems.sort(function(a,b){return $J('.total-price',b).data("price")-$J('.total-price',a).data("price");});$J(".selection-box").append(gridItems);}
$J(document).ready(function(){loaderStart();$J("#filter_by_price").val('2').change();loaderEnd();});const observer=lozad();observer.observe();$J('#change-pickup').on('click',function(){$J('#changed-pickup').removeClass('not-active-wrap');$J('#changed-drop').addClass('not-active-wrap');if(windowSize<=768){$.autotab({tabOnSelect:true});$J('html, body').animate({scrollTop:$J('#changed-pickup').offset().top},800);}});})(jQuery,window);