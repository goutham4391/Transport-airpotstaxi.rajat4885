var skip_cc;window.onload=function(){if(document.getElementById("no_cc")==null){skip_cc='0';}else{skip_cc=document.getElementById("no_cc").value;}};var Validator=Class.create();Validator.prototype={initialize:function(className,error,test,options){if(typeof test==='function'){this.options=$H(options);this._test=test;}else{this.options=$H(test);this._test=function(){return true;};}
this.error=error||'';this.className=className;},test:function(v,elm){return(this._test(v,elm)&&this.options.all(function(p){return Validator.methods[p.key]?Validator.methods[p.key](v,elm,p.value):true;}));}};Validator.methods={pattern:function(v,elm,opt){return Validation.get('IsEmpty').test(v)||opt.test(v);},minLength:function(v,elm,opt){return v.length>=opt;},maxLength:function(v,elm,opt){return v.length<=opt;},min:function(v,elm,opt){return v>=parseFloat(opt);},max:function(v,elm,opt){return v<=parseFloat(opt);},notOneOf:function(v,elm,opt){return $A(opt).all(function(value){return v!==value;});},oneOf:function(v,elm,opt){return $A(opt).any(function(value){return v===value;});},'is':function(v,elm,opt){return v===opt;},isNot:function(v,elm,opt){return v!==opt;},equalToField:function(v,elm,opt){return v===$F(opt);},notEqualToField:function(v,elm,opt){return v!==$F(opt);},include:function(v,elm,opt){return $A(opt).all(function(value){return Validation.get(value).test(v,elm);});}};var Validation=Class.create();Validation.prototype={initialize:function(form,options){this.options=Object.extend({onSubmit:true,stopOnFirst:false,immediate:true,focusOnError:true,useTitles:false,onFormValidate:function(result,form){},onElementValidate:function(result,elm){}},options||{});this.form=$(form);if(this.options.onSubmit){Event.observe(this.form,'submit',this.onSubmit.bind(this),false);}
if(this.options.immediate){var useTitles=this.options.useTitles;var callback=this.options.onElementValidate;Form.getElements(this.form).each(function(input){Event.observe(input,'blur',function(ev){Validation.validate(Event.element(ev),{useTitle:useTitles,onElementValidate:callback});});});}},onSubmit:function(ev){if(!this.validate()){Event.stop(ev);}},validate:function(){var result=false;var useTitles=this.options.useTitles;var callback=this.options.onElementValidate;if(this.options.stopOnFirst){result=Form.getElements(this.form).all(function(elm){return Validation.validate(elm,{useTitle:useTitles,onElementValidate:callback});});}else{result=Form.getElements(this.form).collect(function(elm){return Validation.validate(elm,{useTitle:useTitles,onElementValidate:callback});}).all();}
if(!result&&this.options.focusOnError){Form.getElements(this.form).findAll(function(elm){return $(elm).hasClassName('validation-failed');}).first().focus();}
this.options.onFormValidate(result,this.form);return result;},reset:function(){Form.getElements(this.form).each(Validation.reset);}};Object.extend(Validation,{validate:function(elm,options){options=Object.extend({useTitle:false,onElementValidate:function(result,elm){}},options||{});elm=$(elm);var cn=elm.classNames();var result=cn.all(function(value){var test=Validation.test(value,elm,options.useTitle);options.onElementValidate(test,elm);return test;});return result;},test:function(name,elm,useTitle){var v=Validation.get(name);var prop='__advice'+name.camelize();try{if(Validation.isVisible(elm)&&!v.test($F(elm),elm)){if(!elm[prop]){var advice=Validation.getAdvice(name,elm);if(advice===null){var errorMsg=useTitle?((elm&&elm.title)?elm.title:v.error):v.error;advice='<div class="validation-advice" id="advice-'+name+'-'+Validation.getElmID(elm)+'" style="display:none">'+errorMsg+'</div>';switch(elm.type.toLowerCase()){case 'checkbox':case 'radio':var p=elm.parentNode;var ppp=p.parentNode.parentNode;var pp=p.parentNode;var ppFeedback=ppp.getElementsByClassName('help-block')[0];if(ppFeedback!=null){ppFeedback.removeClassName('sr-only');}
break;default:break;}
advice=Validation.getAdvice(name,elm);}}
elm[prop]=true;elm.removeClassName('validation-passed');elm.addClassName('validation-failed');elm.parentNode.parentNode.addClassName('has-error');elm.parentNode.parentNode.removeClassName('has-success');var item=elm.parentNode.getElementsByClassName('label')[0];if(item!=null){item.addClassName('red_label');}
var validationFeedback=elm.parentNode.getElementsByClassName('help-block')[0];if(validationFeedback!=null){validationFeedback.removeClassName('sr-only');}
var itemIcon=elm.parentNode.getElementsByClassName('error_icon')[0];if(itemIcon!=null){itemIcon.removeClassName('fa fa-check');itemIcon.addClassName('fa fa-exclamation');}
return false;}else{var advice=Validation.getAdvice(name,elm);if(advice!=null)advice.hide();elm[prop]='';switch(elm.type.toLowerCase()){case 'radio':var radpar=elm.parentNode.parentNode.parentNode.getElementsByClassName('help-block')[0];if(radpar!=null){radpar.addClassName('sr-only');}
break;default:break;}
elm.removeClassName('validation-failed');elm.addClassName('validation-passed');elm.parentNode.parentNode.removeClassName('has-error');elm.parentNode.parentNode.addClassName('has-success');var validationFeedback=elm.parentNode.getElementsByClassName('help-block')[0];if(validationFeedback!=null){validationFeedback.addClassName('sr-only');}
var itemIcon=elm.parentNode.parentNode.getElementsByClassName('error_icon')[0];if(itemIcon!=null){itemIcon.addClassName('fa fa-check');itemIcon.removeClassName('fa fa-exclamation');}
var p=elm.parentNode.parentNode;var item=p.getElementsByClassName('label')[0];if(item!=null&&advice!=null){item.removeClassName('red_label');}
return true;}}catch(e){throw(e);}},isVisible:function(elm){while(elm.tagName!='BODY'){if(!$(elm).visible())return false;elm=elm.parentNode;}
return true;},getAdvice:function(name,elm){return $('advice-'+name+'-'+Validation.getElmID(elm))||$('advice-'+Validation.getElmID(elm));},getElmID:function(elm){return elm.id?elm.id:elm.name;},reset:function(elm){elm=$(elm);var cn=elm.classNames();cn.each(function(value){var prop='__advice'+value.camelize();if(elm[prop]){var advice=Validation.getAdvice(value,elm);advice.hide();elm[prop]='';}
elm.removeClassName('validation-failed');elm.removeClassName('validation-passed');});},add:function(className,error,test,options){var nv={};nv[className]=new Validator(className,error,test,options);Object.extend(Validation.methods,nv);},addAllThese:function(validators){var nv={};$A(validators).each(function(value){nv[value[0]]=new Validator(value[0],value[1],value[2],(value.length>3?value[3]:{}));});Object.extend(Validation.methods,nv);},get:function(name){return Validation.methods[name]?Validation.methods[name]:Validation.methods['_LikeNoIDIEverSaw_'];},methods:{'_LikeNoIDIEverSaw_':new Validator('_LikeNoIDIEverSaw_','',{})}});Validation.add('IsEmpty','',function(v){return((v==null)||(v.length==0));});Validation.addAllThese([['required','',function(v){return!Validation.get('IsEmpty').test(v);}],['validate-number','',function(v){return Validation.get('IsEmpty').test(v)||(!isNaN(v)&&!/^\s+$/.test(v));}],['validate-prefix','',function(v){return Validation.get('IsEmpty').test(v)||(/^([+]?\d{1,4})/.test(v));}],['validate-phone-number','',function(v){return Validation.get('IsEmpty').test(v)||(/^[+]?[\d\s]{5,18}$/.test(v));}],['validate-digits','',function(v){return Validation.get('IsEmpty').test(v)||(/[^d{1,15}]+$/.test(v));}],['validate-phone','',function(v){var regex=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;return Validation.get('IsEmpty').test(v)||(regex.test(v));}],['validate-alpha','',function(v){return Validation.get('IsEmpty').test(v)||/^[a-zA-Z\-_\s]+$/.test(v)}],['validate-alphanum','',function(v){return Validation.get('IsEmpty').test(v)||!/\W/.test(v)}],['validate-date','',function(v){if(Validation.get('IsEmpty').test(v))return true;var regex=/^\d{1,2}\/\d{1,2}\/\d{4}$/;if(!regex.test(v))return false;var d=new Date(v);return(parseInt(RegExp.$2,10)==(1+d.getMonth()))&&(parseInt(RegExp.$1,10)==d.getDate())&&(parseInt(RegExp.$3,10)==d.getFullYear());}],['validate-loc1','',function(v){if($('loc1').value==''){return false;}else{return!Validation.get('IsEmpty').test(v)}}],['validate-loc2','',function(v){if($('loc2').value==''){return false;}else{return!Validation.get('IsEmpty').test(v)}}],['validate-email','',function(v){return(Validation.get('IsEmpty').test(v)||/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/.test(v))}],['validate-email-2','',function(v){return(Validation.get('IsEmpty').test(v)||$('client_email').value==v)}],['validate-captcha','',function(v){return Validation.get('IsEmpty').test(v)||($('captcha').value==v)}],['validate-url','',function(v){return Validation.get('IsEmpty').test(v)||/^(http|https|ftp):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(v)}],['validate-time','.',function(v){return Validation.get('IsEmpty').test(v)||/^\d{1,2}[:]\d{2}([:]\d{2})?( [aApP][mM]?)?$/.test(v)}],['validate-time-return','',function(v){var single_num=document.getElementById('single').value;var regex2=/^(\d{2})\/(\d{2})\/(\d{4})$/;var nowDate=new Date();var date1=document.getElementById('date1').value.replace(regex2,'$3-$2-$1');var date2=document.getElementById('date2').value.replace(regex2,'$3-$2-$1');var time1=document.getElementById('time1').value;var time2=document.getElementById('time2').value;if(single_num=='2'){if(date1<date2){return true;}else if(date1==date2){return(time1<time2);}else if(date1>date2){Validation.get('validate-date-au').test(date1.value,date1);return false;}}
return true;}],['validate-date-au','',function(v){var regex=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!regex.test(v))return false;var nowDate=new Date(),nowHours=nowDate.getHours();if(document.getElementById('hourOn1')){var hour1=document.getElementById('hourOn1').value;}else{var hour1=document.getElementById('date1').value;}
var selectedDate=new Date(v.replace(regex,'$2/$1/$3'));if($('date2')!=null){var date2=new Date($('date2').value.replace(regex,'$2/$1/$3'));}
if((selectedDate.getFullYear())<(nowDate.getFullYear())){return false;}
if((selectedDate.getFullYear())==(nowDate.getFullYear())){if((selectedDate.getMonth())<(nowDate.getMonth())){return false;}
if((selectedDate.getMonth())==(nowDate.getMonth())){if(selectedDate.getDate()<nowDate.getDate()){return false;}else if(selectedDate.getDate()==nowDate.getDate()){if(hour1<nowHours){return false;}else{return true;}}}}
if((selectedDate.getDate())==(date2.getDate())){if(selectedDate.getHours()<date2.getHours()){return true;}}
return true;}],['validate-date-au-2','',function(v){var regex=/^(\d{2})\/(\d{2})\/(\d{4})$/;var regex2=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!regex2.test(v))return false;var now=new Date();var d2=new Date(v.replace(regex,'$2/$1/$3'));var date1=$('date1')!=null?$('date1').value.replace(regex2,'$2/$1/$3'):($('update_date1')!=null?$('update_date1').value.replace(regex2,'$2/$1/$3'):null);var d1=new Date(date1);if((d2.getFullYear())<(d1.getFullYear())){return false;}
if((d2.getFullYear())==(d1.getFullYear())){if((d2.getMonth())<(d1.getMonth())){return false;}
if((d2.getMonth())==(d1.getMonth())){if((d2.getDate())<(d1.getDate())){return false;}else if(d2.getDate()==d1.getDate()){if(d1.getHours()<(d2.getHours()+1)){return true;}else{return false;}}
return true;}}
if((d2.getFullYear())<(now.getFullYear())){return false;}
if((d2.getFullYear())==(now.getFullYear())){if((d2.getMonth())<(now.getMonth())){return false;}
if((d2.getMonth())==(now.getMonth()))
if((d2.getDate())<=(now.getDate())){return false;}}
return true;}],['validate-date-1','',function(v){var regex=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!regex.test(v))return false;var nowDate=new Date(),nowTime=nowDate.getTime();var time1=document.getElementById('time1_input').value;var selectedDate=new Date(v.replace(regex,'$2/$1/$3'));if($('date2')!=null){var date2=new Date($('date2').value.replace(regex,'$2/$1/$3'));}
if((selectedDate.getFullYear())<(nowDate.getFullYear())){return false;}
if((selectedDate.getFullYear())==(nowDate.getFullYear())){if((selectedDate.getMonth())<(nowDate.getMonth())){return false;}
if((selectedDate.getMonth())==(nowDate.getMonth())){if(selectedDate.getDate()<nowDate.getDate()){return false;}else if(selectedDate.getDate()==nowDate.getDate()){if(time1<nowTime){return false;}else{return true;}}}}
if((selectedDate.getDate())==(date2.getDate())){if(selectedDate.getTime()<date2.getTime()){return true;}}
return true;}],['validate-date-2','',function(v){var regex=/^(\d{2})\/(\d{2})\/(\d{4})$/;var regex2=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!regex2.test(v))return false;var now=new Date();var d2=new Date(v.replace(regex,'$2/$1/$3'));var date1=$('date1')!=null?$('date1').value.replace(regex2,'$2/$1/$3'):($('update_date1')!=null?$('update_date1').value.replace(regex2,'$2/$1/$3'):null);var d1=new Date(date1);if((d2.getFullYear())<(d1.getFullYear())){return false;}
if((d2.getFullYear())==(d1.getFullYear())){if((d2.getMonth())<(d1.getMonth())){return false;}
if((d2.getMonth())==(d1.getMonth())){if((d2.getDate())<(d1.getDate())){return false;}else if(d2.getDate()==d1.getDate()){if(d1.getHours()<(d2.getHours()+1)){return true;}else{return false;}}
return true;}}
if((d2.getFullYear())<(now.getFullYear())){return false;}
if((d2.getFullYear())==(now.getFullYear())){if((d2.getMonth())<(now.getMonth())){return false;}
if((d2.getMonth())==(now.getMonth()))
if((d2.getDate())<=(now.getDate())){return false;}}
return true;}],['validate-times-return','',function(v){var single_num=document.getElementById('single').value;var regex2=/^(\d{2})\/(\d{2})\/(\d{4})$/;var nowDate=new Date(),nowTime=nowDate.getTime();var date1=document.getElementById('date1').value.replace(regex2,'$3-$2-$1');var date2=document.getElementById('date2').value.replace(regex2,'$3-$2-$1');var time1=document.getElementById('time1').value;var time1_input=document.getElementById('time1_input').value;var time2=document.getElementById('time2').value;if(nowTime<time1){console.log("it/'s on");Validation.get('validate-times-return').test(time1_input.value,time1_input);return false;}
if(single_num=='2'){if(date1<date2){return true;}else if(date1==date2){return(time1<time2);}else if(date1>date2){Validation.get('validate-date-1').test(date1.value,date1);return false;}}
return true;}],['validate-dates','',function(v){var regex=/^(\d{2})\/(\d{2})\/(\d{4})$/;if(!regex.test(v))return false;var nowDate=new Date(),nowHours=nowDate.getHours();var time1=document.getElementById('time1').value;var selectedDate=new Date(v.replace(regex,'$2/$1/$3'));if($('date2')!=null){var date2=new Date($('date2').value.replace(regex,'$2/$1/$3'));}
if((selectedDate.getFullYear())<(nowDate.getFullYear())){return false;}
if((selectedDate.getFullYear())==(nowDate.getFullYear())){if((selectedDate.getMonth())<(nowDate.getMonth())){return false;}
if((selectedDate.getMonth())==(nowDate.getMonth())){if(selectedDate.getDate()<nowDate.getDate()){return false;}else if(selectedDate.getDate()==nowDate.getDate()){if(time1<nowHours){return false;}else{return true;}}}}
if((selectedDate.getDate())==(date2.getDate())){if(selectedDate.getHours()<date2.getHours()){return true;}}
return true;}],['validate-times','',function(v){var single_num=document.getElementById('single').value;var regex2=/^(\d{2})\/(\d{2})\/(\d{4})$/;var nowDate=new Date();var date1=document.getElementById('date1').value.replace(regex2,'$3-$2-$1');var date2=document.getElementById('date2').value.replace(regex2,'$3-$2-$1');var time1=document.getElementById('time1').value;var time2=document.getElementById('time2').value;if(single_num=='1'){if(date1<nowDate)
return false;}
if(single_num=='2'){if(date1<date2){return true;}else if(date1==date2){return(time1<time2);}else if(date1>date2){Validation.get('validate-dates').test(date1.value,date1);return false;}}
return true;}],['validate-currency-dollar','Please enter a valid $ amount. For example $100.00 .',function(v){return Validation.get('IsEmpty').test(v)||/^\$?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/.test(v)}],['validate-selection','',function(v,elm){return elm.options?elm.selectedIndex>0:!Validation.get('IsEmpty').test(v);}],['expire','',function(v,elm){var monthSelection=document.getElementById('expire_month');var month=monthSelection.options[monthSelection.selectedIndex].value;var yearSelection=document.getElementById('expire_year');var year=yearSelection.options[yearSelection.selectedIndex].value;var todayDate=new Date;var thisMonth=todayDate.getMonth()+1;var thisYear=todayDate.getFullYear();if(thisMonth<10){thisMonth='0'+thisMonth}
if(month>=1&&year>=1){if(year>thisYear){$('expire_month').removeClassName('validation-failed');$('expire_month').addClassName('validation-passed');$('exp_date_lbl').removeClassName('red_label');$('err_exp_date').hide();return true;}else{if(month>=thisMonth){$('expire_month').removeClassName('validation-failed');$('expire_month').addClassName('validation-passed');$('exp_date_lbl').removeClassName('red_label');$('err_exp_date').hide();return true;}else{return false;}}}else{return false;}}],['validate-cvv','',function(v){var regex=/^[0-9]{3,3}$/;var regexx=/^[0-9]{4,4}$/;return(Validation.get('IsEmpty').test(v)||regex.test(v)||regexx.test(v))}],['validate-cvv-2','',function(v,el,value){var regex=/^[0-9]{3,3}$/;var wrapper=el.up("div").up("div").up("div");var ref=wrapper.select("#client_cardtype")[0];var regexx=/^[0-9]{4,4}$/
return(Validation.get('IsEmpty').test(v)||regex.test(v)||regexx.test(v))}],['validate-one-required','Please select one of the above options.',function(v,elm){var p=elm.parentNode;var options=p.getElementsByTagName('input');return $A(options).any(function(elm){return $F(elm);});}],['validate-cc','',function(v){v=v.replace(/-/g,"");var regex=new RegExp("^[0-9]{16}$");var cardno=/^(?:3[47][0-9]{13})$/;if(v.match(cardno)){return true;}
if(!regex.test(v))
return false;var ccRegular=/(\d\d\d\d[- ]?)*\d\d\d\d?$/g.test(v);v=v.replace(/[^\d]/g,'');var ntoMoreDigits=v.length<=16;var sum=0;var numdigits=v.length;var parity=numdigits%2;for(var i=0;i<numdigits;i++){var digit=parseInt(v.charAt(i))
if(i%2==parity)digit*=2;if(digit>9)digit-=9;sum+=digit;}
return((sum%10)==0)&&(ccRegular)&&(ntoMoreDigits);}]]);function validateFlightTime(time,timelbl,err_ico,hour,minute){Event.observe(hour,'click',function(){var a=$(time).getValue();if(a!=''){$(time).removeClassName('validation-failed');$(time).addClassName('validation-passed');$(timelbl).removeClassName('red_label');}else{$(time).removeClassName('validation-passed');$(time).addClassName('validation-failed');$(timelbl).addClassName('red_label');}});Event.observe(minute,'click',function(){var a=$(time).getValue();if(a!=''){$(time).removeClassName('validation-failed');$(time).addClassName('validation-passed');$(timelbl).removeClassName('red_label');}else{$(time).removeClassName('validation-passed');$(time).addClassName('validation-failed');$(timelbl).addClassName('red_label');}});}
var validate_array=['expire','client_cardholder','client_cc','client_ccv','client_cardtype'];function include(obj){var arr=validate_array;for(var i=0;i<arr.length;i++){if(arr[i]==obj)return true;}}