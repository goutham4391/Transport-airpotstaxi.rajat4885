var post=new Object();var start_init2=true;var validator;$J=jQuery.noConflict();document.addEventListener("DOMContentLoaded",function(){createListeners();if($('form')!=null)validator=new Validation('form',{immediate:true,onFormValidate:formCallback});if($('form2')!=null)validator=new Validation('form2',{immediate:true,onFormValidate:formCallback});if($('form3')!=null)validator=new Validation('form3',{immediate:true,onFormValidate:formCallback3});});function createListeners(){$J('#date1').on('change',function(e){e.stopPropagation();$J("#time1_input").trigger('click');});$J('#return_show').on('click',function(e){e.stopPropagation();$J('#date2').val($J('#date1').val());});if($('select_return_1')!=null){$('select_return_1').observe('click',function(e){e.preventDefault();this.addClassName("active");$J('#single').val('1');$('select_return_2').removeClassName('active');$('return_details').hide();});}
if($('select_return_2')!=null){$('select_return_2').observe('click',function(e){e.preventDefault();this.addClassName("active");$J('#single').val('2');$('select_return_1').removeClassName('active');if($('time2')!=null&&$('date2')!=null){var date_one=$J('#date1').val();var date_two=$J('#date2').val();if(date_two==''){$J('#date2').val(date_one);$J('#hour2').val(parseInt($J('#hour1').val())+1);$J('#minute2').val($J('#minute1').val());addAsTime(2);}}
$('return_details').show();});}
var obj=$J('#time1_input');if(Object.keys(obj).length!=0&&obj.constructor!=Object)
$J('#time1_input').datetimepicker({format:'HH:mm',stepping:5,allowInputToggle:true,toolbarPlacement:'top'}).on("dp.change",function(e){let date=e.date;$J("#time1").val(date.format("HH:mm"));});var obj_2=$J('#time2_input');if(Object.keys(obj_2).length!=0&&obj_2.constructor!=Object)
$J('#time2_input').datetimepicker({format:'HH:mm',stepping:5,allowInputToggle:true,toolbarPlacement:'top'}).on("dp.change",function(e){let date=e.date;$J("#time2").val(date.format("HH:mm"));});$J('#return_show').on('click',function(){$J('#single').val('2');$J("#time2").val($J("#time2_input").val());$J('#return_show').hide();$J('#return_details').show();$J('#time2_input').datetimepicker({format:'HH:mm',stepping:5,allowInputToggle:true}).on("dp.change",function(e){let date=e.date;$J("#time2").val(date.format("HH:mm"));});});if($J('.one_way-show')){$J('.one_way-show').on('click',function(){$J('#single').val('1');$J('#return_details').hide();$J('#return_show').show();});}
if($('submit_update')!=null)
$('submit_update').observe('click',function(event){var validator=new Validation('update_form',{immediate:true,onFormValidate:formCallback});});if(typeof init2==="function"&&start_init2){start_init2=false;init2();}}
function displayByLocationType(el,cont){el=parseInt(el);if(isNaN(el)){return '';}
var url='/ajax/getlocbyidtype/'+"?id="+el;var data="&id="+el;var type=0;$J.ajax({type:'POST',url:url,data:'',success:function(data){var loc_json=data;type=loc_json.type_id;var container=$('transport_type_'+cont);switch(type){case 1:container.innerHTML='Pick-Up Time';break;case 2:container.innerHTML='Flight Arrival Time';break;case 3:container.innerHTML='Pick-Up Time';break;case 4:container.innerHTML='Train Arrival Time';break;default:container.innerHTML='<span class="form-control-icon"><i class="fa fa-clock-o fa-flip-horizontal" aria-hidden="true"></i></span>';break;}}});}
function displayByLocType(typeid,cont){var container=document.getElementById('transport_type_'+cont);var type=typeid;if(type=='1'){container.innerHTML='Pick-Up Time';}else if(type=='2'){container.innerHTML='Flight Arrival Time';}else if(type=='3'){container.innerHTML='Pick-Up Time';}else if(type=='4'){container.innerHTML='Train Arrival Time';}else{container.innerHTML='<span class="form-control-icon"><i class="fa fa-clock-o fa-flip-horizontal" aria-hidden="true"></i></span>';}}
function populateList(control,data,label_value){label_value=typeof label_value!=='undefined'?label_value:'Select';control.options.length=0;control.options.add(new Option(label_value,-1));data=eval(data);var fist_time=0;if(typeof(data[0].type_id)!=='undefined'){control.innerHTML="";control.options.add(new Option(label_value,-1));}
for(var i=0;i<data.length;i++){if(typeof(data[i].type_id)!=='undefined'){var opg;var opt;var last_type;if(fist_time==0){switch(data[i].type_id)
{case "1":opg=document.createElement('optgroup');opg.label='Other Locations';fist_time=1;var last_type=data[i].type_id;break;case "2":opg=document.createElement('optgroup');opg.label='Airports';fist_time=1;var last_type=data[i].type_id;break;case "3":opg=document.createElement('optgroup');opg.label='Cruise Ports';fist_time=1;var last_type=data[i].type_id;break;case "4":opg=document.createElement('optgroup');opg.label='Train Stations';fist_time=1;var last_type=data[i].type_id;break;case "5":opg=document.createElement('optgroup');opg.label='Bus Stations';fist_time=1;var last_type=data[i].type_id;break;case "6":opg=document.createElement('optgroup');opg.label='Popular Locations';fist_time=1;var last_type=data[i].type_id;break;}}
if(i<data.length-1){if(data[i+1].type_id!=last_type){fist_time=0;}}
opt=document.createElement('option');opt.label=data[i].name;opt.text=data[i].name;opt.value=data[i].id;opg.appendChild(opt);control.appendChild(opg);}else{opt=document.createElement('option');opt.label=data[i].name;opt.text=data[i].name;opt.value=data[i].id;control.options.add(opt);}}}
function populateLocations(control,data){control.options.length=0;control.options.add(new Option('Select',-1));if(data.length!=0)toggle(control,true);data=eval(data);for(var i=0;i<data.length;i++){var opt=new Option(data[i].name,data[i].id);control.options.add(opt);}}
function ajaxr(url,data,callback){var options={asynchronous:true,method:'POST',postBody:data,onComplete:callback};new Ajax.Request(url,options);}
function toggle(element,val){element.disabled=!val;element.options[0].selected=true;}
function formCallback(result,form){if(result){let loc1=$J('#select_loc1').val();let loc2=$J('#select_loc2').val();loc1=loc1.replaceAll(',','');loc1=loc1.replaceAll('.','');loc1=loc1.replaceAll('/','');loc1=loc1.replaceAll('"','');loc1=loc1.replaceAll('&amp;','');loc1=loc1.replaceAll('&','');loc1=loc1.replaceAll(' ','-');loc2=loc2.replaceAll(',','');loc2=loc2.replaceAll('.','');loc2=loc2.replaceAll('/','');loc2=loc2.replaceAll('"','');loc2=loc2.replaceAll('&amp;','');loc2=loc2.replaceAll('&;','');loc2=loc2.replaceAll(' ','-');loc1=loc1.split("---",1);loc1=loc1.toString();loc1=loc1.split("-(",1);loc2=loc2.split("---",1);loc2=loc2.toString();loc2=loc2.split("-(",1);if(form.id=='form'||form.id=='form2')form.action+='Transfer-from-'+loc1+'-to-'+loc2;form.submit();}}
String.prototype.replaceAll=function(strTarget,strSubString){var strText=this;var intIndexOfMatch=strText.indexOf(strTarget);while(intIndexOfMatch!=-1){strText=strText.replace(strTarget,strSubString);intIndexOfMatch=strText.indexOf(strTarget);}
return(strText);};function toggleBookform(val){var element=$('bookform2');if(element.style.display!='none'){$('return_show').show();$('return_details').hide().removeClassName('highlight');$('single').value='1';}else{$('return_show').hide();$('return_details').show().addClassName('highlight');$('single').value='2';}
if($('hour1')&&$('hour2')){addAsTime(1);addAsTime(2);}}
function addAsTime(num){var time=$('hour'+num).value+':'+$('minute'+num).value;$('time'+num).value=time;}
function addAsTimeQuote(num){var time=$('hour_q'+num).value+':'+$('minute_q'+num).value;$('time_q'+num).value=time;}
function addAsTimeFromInput(num){var time=$('time'+num+'_input').value;$('time'+num).value=time;}
function addAsTime2(num,elem){time='';var num2=num-1;if($('hour'+num).value!=''&&$('minute'+num).value){var time=$('hour'+num).value+':'+$('minute'+num).value;}
$(elem).value=time;}
function mailTransfer(loc1,loc2,single,date1,date2,time1,time2,pax1){var url='/ajax/mailquote';var email=prompt('Enter your email address','');if(email==null){return false;}
var filter=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!filter.test(email)){alert('Please provide a valid email address!');return false;}
var data="loc1_id="+loc1+"&loc2_id="+loc2+"&email="+email+"&url="+document.location.href+"&single="+single+"&date1="+date1+"&date2="+date2+"&time1="+time1+"&time2="+time2+"&pax1="+pax1;ajaxr(url,data,function(data){alert("Email has been sent");});return false;}